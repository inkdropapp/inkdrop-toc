{"version":3,"sources":["../src/toc.js"],"names":["module","exports","origAComponent","activate","MDEPreview","inkdrop","components","classes","remarkPlugins","push","Toc","setTocLinkComponent","deactivate","filter","plugin","unsetTocComponent","OrigA","remarkReactOptions","remarkReactComponents","a","RemarkAnchor"],"mappings":";;AAAA;;;;AACA;;;;;;AAEAA,OAAOC,OAAP,GAAiB;AACfC,kBAAgB,IADD;;AAGfC,aAAW;AACT,UAAM,EAAEC,UAAF,KAAiBC,QAAQC,UAAR,CAAmBC,OAA1C;AACA,QAAIH,UAAJ,EAAgB;AACdA,iBAAWI,aAAX,CAAyBC,IAAzB,CAA8BC,mBAA9B;AACA,WAAKC,mBAAL;AACD;AACF,GATc;;AAWfC,eAAa;AACX,UAAM,EAAER,UAAF,KAAiBC,QAAQC,UAAR,CAAmBC,OAA1C;AACA,QAAIH,UAAJ,EAAgB;AACdA,iBAAWI,aAAX,GAA2BJ,WAAWI,aAAX,CAAyBK,MAAzB,CACzBC,UAAUA,WAAWJ,mBADI,CAA3B;AAGA,WAAKK,iBAAL;AACD;AACF,GAnBc;;AAqBfJ,wBAAsB;AACpB,UAAM,EAAEP,UAAF,KAAiBC,QAAQC,UAAR,CAAmBC,OAA1C;AACA,UAAMS,QAAQZ,WAAWa,kBAAX,CAA8BC,qBAA9B,CAAoDC,CAAlE;AACA,UAAMC,eAAe,4BAAmBJ,KAAnB,CAArB;AACAZ,eAAWa,kBAAX,CAA8BC,qBAA9B,CAAoDC,CAApD,GAAwDC,YAAxD;AACA,SAAKlB,cAAL,GAAsBc,KAAtB;AACD,GA3Bc;;AA6BfD,sBAAoB;AAClB,UAAM,EAAEX,UAAF,KAAiBC,QAAQC,UAAR,CAAmBC,OAA1C;AACAH,eAAWa,kBAAX,CAA8BC,qBAA9B,CAAoDC,CAApD,GAAwD,KAAKjB,cAA7D;AACD;AAhCc,CAAjB","file":"toc.js","sourcesContent":["import Toc from 'remark-toc'\nimport createRemarkAnchor from './remark-anchor'\n\nmodule.exports = {\n  origAComponent: null,\n\n  activate() {\n    const { MDEPreview } = inkdrop.components.classes\n    if (MDEPreview) {\n      MDEPreview.remarkPlugins.push(Toc)\n      this.setTocLinkComponent()\n    }\n  },\n\n  deactivate() {\n    const { MDEPreview } = inkdrop.components.classes\n    if (MDEPreview) {\n      MDEPreview.remarkPlugins = MDEPreview.remarkPlugins.filter(\n        plugin => plugin !== Toc\n      )\n      this.unsetTocComponent()\n    }\n  },\n\n  setTocLinkComponent() {\n    const { MDEPreview } = inkdrop.components.classes\n    const OrigA = MDEPreview.remarkReactOptions.remarkReactComponents.a\n    const RemarkAnchor = createRemarkAnchor(OrigA)\n    MDEPreview.remarkReactOptions.remarkReactComponents.a = RemarkAnchor\n    this.origAComponent = OrigA\n  },\n\n  unsetTocComponent() {\n    const { MDEPreview } = inkdrop.components.classes\n    MDEPreview.remarkReactOptions.remarkReactComponents.a = this.origAComponent\n  }\n}\n"]}